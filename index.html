<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Smoothed-particle hydrodynamics (SPH) code</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Smoothed-particle hydrodynamics (SPH) code</h1>
<p>
<a class="el" href="developer_guide.html">Developer Guide</a><h2><a class="anchor" name="intro_sec">
Introduction</a></h2>
SPH 2D code<h2><a class="anchor" name="install_sec">
Installation</a></h2>
Check the source code from github and compile <div class="fragment"><pre class="fragment">
 git clone git://github.com/slitvinov/sph-blitz
 cd sph-blitz
 ./local-install.sh  </pre></div> The script configures and compiles the following third party libraries<ul>
<li>tcl <a href="http://www.tcl.tk/">http://www.tcl.tk/</a></li><li>blitz++ <a href="http://www.oonumerics.org/blitz/">http://www.oonumerics.org/blitz/</a></li><li>glog <a href="http://code.google.com/p/google-glog/">http://code.google.com/p/google-glog/</a> </li></ul>
<h2><a class="anchor" name="incomp_code">
Incompressible Version</a></h2>
<h3><a class="anchor" name="restart_file">
Restart file format</a></h3>
<h3><a class="anchor" name="input_file">
Input file format</a></h3>
Examples of input files are sotred in sph-blitz/case directory. Input files are writen in <b>TCL</b> language. See comments in the files for explanation.<h3><a class="anchor" name="sim">
Runnig simulations</a></h3>
<div class="fragment"><pre class="fragment">
 cd src
 ./sph ../cases/couette </pre></div> <h3><a class="anchor" name="post">
Postprocessing</a></h3>
To combine all time snapshots in one file <div class="fragment"><pre class="fragment">
 cd outdata/
 ../../scripts/dat2punto.sh &gt; punto.dat
 </pre></div><h3><a class="anchor" name="vis">
Visuzalization</a></h3>
<h4><a class="anchor" name="vis_gnuplot">
gnuplot</a></h4>
<div align="center">
<img src="pognuplot.png" alt="pognuplot.png">
<p><strong>Poiseuille flow: velocites of the particles visualization with gnuplot</strong></p></div>
 <h4><a class="anchor" name="vis_punto">
punto</a></h4>
<div class="fragment"><pre class="fragment">
 punto -D 2 -c 4 -B 0:0:0.04:0.04 -G -0.6:0.6 -s 8 -lc black -bg white  punto.dat </pre></div> <div align="center">
<img src="couette.png" alt="couette.png">
<p><strong>Couette flow: particle visualization with punto</strong></p></div>
 <div align="center">
<img src="poiseuille.png" alt="poiseuille.png">
<p><strong>Poiseuille flow: particle visualization with punto</strong></p></div>
 <h2><a class="anchor" name="comp_code">
Compressible Version</a></h2>
<h3><a class="anchor" name="input_file">
Input file format</a></h3>
two inputfiles for compressible version (both in cases folder) <ul>
<li>
tcl-file with information on the configuration (same as for incompressible case) </li>
<li>
additionally a file to initialize particles (.ivs) </li>
</ul>
<h3><a class="anchor" name="simCompr">
Preparing and Runnig simulations</a></h3>
<ol>
<li>
<b>creating the .ivs-file</b> with the particle initialization information <br>
 go to desired folder in sph-blitz/scripts (for example for shock tube:) <div class="fragment"><pre class="fragment">
sph-blitz/scripts/InitCondShockTube
</pre></div> run <div class="fragment"><pre class="fragment">
make
</pre></div> run desired initial condition script (example is 1D particle distribution with constant mass particles) (q1D in file-name means quasi-1D (2D particle distribution)) <div class="fragment"><pre class="fragment">
./create_IC1D_mConst
</pre></div> corresponding .ivs file is now created in sph-blitz/cases<br>
 <br>
 </li>
<li>
<b>running the simulation</b> <br>
 go to the source folder<p>
<div class="fragment"><pre class="fragment">
 cd ../../ src
</pre></div> and run the simulation program with the two inputfiles (.tcl file WITHOUT file anding) <div class="fragment"><pre class="fragment">

 ./sph ../cases/1Dshock ../cases/1DshockMConst.ivs
</pre></div> Note: only use couples of configuration (.tcl) files and .ivs files which are suitable <br>
 the following couples go together<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b> .tcl files </b>  </td><td><b> .ivs files </b>  </td><td><b> remarks </b>  </td></tr>
<tr>
<td>1Dshock.tcl </td><td>1DshockSpaceConst.ivs,<br>
 1DshockMConst.ivs </td><td>--   </td></tr>
<tr>
<td>q1Dshock.tcl </td><td>q1DshockSpaceConst.ivs,<br>
 q1DshockMConst.ivs </td><td>--   </td></tr>
<tr>
<td>1DOscillation.tcl </td><td>1DOscillation.ivs </td><td>uncomment line 158 in <a class="el" href="sph_8cpp.html">sph.cpp</a> for mass calculation   </td></tr>
<tr>
<td>1DTravelingWave.tcl </td><td>1DTravelingWave.ivs </td><td><ul>
<li>
concerning artificial viscosity:c.f footnote under table <br>
 </li>
<li>
uncomment line 158 in <a class="el" href="sph_8cpp.html">sph.cpp</a> for mass calculation </li>
</ul>
</td></tr>
<tr>
<td>singleWaveWithReflection.tcl  </td><td>1DunperturbedDomain.ivs </td><td><ul>
<li>
concerning artificial viscosity:c.f footnote under table <br>
 </li>
<li>
uncomment line 158 in <a class="el" href="sph_8cpp.html">sph.cpp</a> for mass calculation </li>
<li>
uncomment line 71-81 in Timesolver/gastimesolverLeapfrog.cpp for moving wall </li>
</ul>
<p>
</td></tr>
</table>
Note: as artificial viscosity is implemented and only turned on for approaching particles (as recommended for shock tube in literature), the traveling waves are distorded. To get rid of this effect one would have to turn on art. visc. globally (<a class="el" href="interaction_8cpp.html">interaction.cpp</a>, line 159, if-statement,e.g. change to if(-1&lt;0) ). A simulation without any art. visc. is not (physically) stable as the SPH code does not introduce any intrinsic numerical dissipation<p>
</li>
</ol>
<h3><a class="anchor" name="postCompr">
Postprocessing</a></h3>
<ol>
<li>
<b>combine all time snapshots in one file</b> <div class="fragment"><pre class="fragment">
 cd outdata/
 ../../scripts/dat2punto.sh &gt; punto.dat
 </pre></div><p>
</li>
<li>
still in outdata: <b>run gnuplot</b> <div class="fragment"><pre class="fragment">
gnuplot\
</pre></div> in gnuplotshell, <b>run gnuplot-script</b> depending on the simulation type <ul>
<li>
for shock tube with 1D particle distribution (4 options) <div class="fragment"><pre class="fragment">
load '../../gnuplot/shockTube_1D/velocity_movie.gp'
load '../../gnuplot/shockTube_1D/pressure_movie.gp'
load '../../gnuplot/shockTube_1D/density_movie.gp'
load '../../gnuplot/shockTube_1D/energy_movie.gp'

</pre></div> </li>
<li>
for q1D Shock-tube (2D particle distribution) (4 options as well), <div class="fragment"><pre class="fragment">
load '../../gnuplot/shockTube_q1D/velocity_movie.gp'
load '../../gnuplot/shockTube_q1D/pressure_movie.gp'
load '../../gnuplot/shockTube_q1D/density_movie.gp'
load '../../gnuplot/shockTube_q1D/energy_movie.gp'
</pre></div> </li>
<li>
for 1D stationnary oscillating wave <div class="fragment"><pre class="fragment">
load '../../gnuplot/1DWave/waveMovieVelocity.gp'
load '../../gnuplot/1DWave/waveMoviePressure.gp'
load '../../gnuplot/1DWave/waveMovieDensity.gp'
load '../../gnuplot/1DWave/waveMoviePosition.gp'
</pre></div> </li>
<li>
for 1D traveling wave <div class="fragment"><pre class="fragment">
load '../../gnuplot/1DWave/TravelingWaveMovieVelocity.gp'
load '../../gnuplot/1DWave/TravelingWaveMoviePressure.gp'
load '../../gnuplot/1DWave/TravelingWaveMovieDensity.gp'
load '../../gnuplot/1DWave/TravelingWaveMoviePosition.gp'
</pre></div><p>
</li>
<li>
for single 1D wave train with reflection and interference <div class="fragment"><pre class="fragment">
load '../../gnuplot/1DWave/SingleWaveMovieVelocity.gp'
load '../../gnuplot/1DWave/SingleWaveMoviePressure.gp'
load '../../gnuplot/1DWave/SingleWaveMovieDensity.gp'
</pre></div><p>
If a post-processing including quantitative comparison to reference solution (for shock tube cases) is desired, refer to README in sph-blitz/scripts/postProcessingShockTube. <br>
There are also results (readily post processed, including visualization) in their respective folder, for example: <br>
sph-blitz/results/ShockTubeTestCase/1DpartDist_constMass_LeapFrog_sumDes <br>
(this is for 1D particle distribution with constant mass particles, leapFrog integrator and summation approach for density calculation) </li>
</ul>
</li>
</ol>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 6 17:43:25 2010 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
